#include "LED_Display.h"
#include "delay.h"

unsigned char num[16][5]={
    {0xF7, 0xED, 0xDD, 0xBD, 0x7F}, // '0'
    {0xF1, 0xE9, 0xD9, 0xB9, 0x79}, // '1'
    {0xF7, 0xE9, 0xDF, 0xBC, 0x7F}, // '2'
    {0xF7, 0xE9, 0xDF, 0xB9, 0x7F}, // '3'
    {0xF5, 0xED, 0xDF, 0xB9, 0x79}, // '4'
    {0xF7, 0xEC, 0xDF, 0xB7, 0x7F}, // '5'
    {0xF7, 0xED, 0xDF, 0xBD, 0x7F}, // '6'
    {0xF7, 0xE9, 0xD9, 0xB9, 0x79}, // '7'
    {0xF7, 0xED, 0xDF, 0xBD, 0x7F}, // '8'
    {0xF7, 0xED, 0xDF, 0xB9, 0x79}, // '9'
    {0xF7, 0xED, 0xDF, 0xBD, 0x7D}, // 'A'
    {0xF4, 0xEC, 0xDF, 0xBD, 0x7F}, // 'B'
    {0xF7, 0xEC, 0xDC, 0xBC, 0x7F}, // 'C'
    {0xF1, 0xE9, 0xDF, 0xBD, 0x7F}, // 'D'
    {0xF7, 0xEC, 0xDF, 0xBC, 0x7F}, // 'E'
    {0xF7, 0xEC, 0xDF, 0xBC, 0x7C}  // 'F'
};


//PF1-PF4 and PD0-PD3 initialized for output
//inputs: none
//outputs: none
void LED_Display_init(void)
{
    SYSCTL->RCGCGPIO |= 0x28;   // enable clock to GPIOF & D
    while ((SYSCTL->RCGCGPIO&0x28)==0){}
    GPIOD->DIR |= 0x0F;
    GPIOD->DEN |= 0x0F;
    GPIOF->DIR |= 0x1E;
    GPIOF->DEN |= 0x1E;
}

// Function to display a hex digit
//inputs:hex value you want to display
//outputs: none
void displayDigit(char hex) 
{
	for (int i=0;i<5;i++)
	{
		//shifts PF to ports 1-4 and inverts it because of the hex inverter
		GPIOF->DATA = ~((num[hex][i] & 0xF0) >> 3);
		GPIOD->DATA = ~(num[hex][i] & 0x0F);
		delayMs(1);		
	}
}
